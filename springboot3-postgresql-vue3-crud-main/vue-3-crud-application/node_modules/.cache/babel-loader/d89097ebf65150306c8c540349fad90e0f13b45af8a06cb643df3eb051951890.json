{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport UserDataService from \"@/service/UserDataService\";\nexport default {\n  name: \"Login\",\n  data() {\n    return {\n      user: {\n        name: \"\",\n        email: \"\",\n        password: \"\"\n      },\n      errors: []\n    };\n  },\n  methods: {\n    async check(e) {\n      e.preventDefault();\n      this.errors = [];\n      const res = await UserDataService.findUserByName(this.user.name);\n      if (res.data.length === 0) {\n        alert(\"Invalid credentials\");\n        console.log(\"Invalid credentials\");\n        this.errors.push(\"Invalid credentials\");\n      } else {\n        let password = \"\";\n        for (let i = 0; i < res.data.length; i++) {\n          if (this.user.name === res.data[i].name) {\n            this.user.id = res.data[i].id;\n            password = res.data[i].password;\n            break;\n          }\n        }\n        if (this.user.password !== password) {\n          alert(\"Invalid credentials\");\n          this.errors.push(\"Invalid credentials\");\n        }\n      }\n      console.log(this.errors);\n      console.log(\"one\", this.user.id);\n      return this.errors.length === 0;\n    },\n    async login() {\n      const isValid = await this.check(event);\n      console.log(isValid);\n      console.log(this.user.id);\n      if (isValid) {\n        this.$router.push(`/user/${this.user.id}/data`);\n      }\n    }\n  }\n};","map":{"version":3,"mappings":";AA4BA,OAAOA,eAAc,MAAO,2BAA2B;AAEvD,eAAe;EACXC,IAAI,EAAE,OAAO;EACbC,IAAI,GAAG;IACH,OAAO;MACHC,IAAI,EAAE;QACFF,IAAI,EAAE,EAAE;QACRG,KAAK,EAAE,EAAE;QACTC,QAAQ,EAAE;MACd,CAAC;MACDC,MAAM,EAAE;IACZ,CAAC;EACL,CAAC;EACDC,OAAO,EAAE;IACL,MAAMC,KAAK,CAACC,CAAC,EAAE;MACXA,CAAC,CAACC,cAAc,EAAE;MAClB,IAAI,CAACJ,MAAK,GAAI,EAAE;MAEhB,MAAMK,GAAE,GAAI,MAAMX,eAAe,CAACY,cAAc,CAAC,IAAI,CAACT,IAAI,CAACF,IAAI,CAAC;MAEhE,IAAIU,GAAG,CAACT,IAAI,CAACW,MAAK,KAAM,CAAC,EAAE;QACvBC,KAAK,CAAC,qBAAqB,CAAC;QAC5BC,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC;QAClC,IAAI,CAACV,MAAM,CAACW,IAAI,CAAC,qBAAqB,CAAC;MAC3C,OAAO;QACH,IAAIZ,QAAO,GAAI,EAAE;QACjB,KAAK,IAAIa,IAAI,CAAC,EAAEA,IAAIP,GAAG,CAACT,IAAI,CAACW,MAAM,EAAEK,CAAC,EAAE,EAAE;UACtC,IAAI,IAAI,CAACf,IAAI,CAACF,IAAG,KAAMU,GAAG,CAACT,IAAI,CAACgB,CAAC,CAAC,CAACjB,IAAI,EAAE;YACrC,IAAI,CAACE,IAAI,CAACgB,EAAC,GAAIR,GAAG,CAACT,IAAI,CAACgB,CAAC,CAAC,CAACC,EAAE;YAC7Bd,QAAO,GAAIM,GAAG,CAACT,IAAI,CAACgB,CAAC,CAAC,CAACb,QAAQ;YAC/B;UACJ;QACJ;QACA,IAAI,IAAI,CAACF,IAAI,CAACE,QAAO,KAAMA,QAAQ,EAAE;UACjCS,KAAK,CAAC,qBAAqB,CAAC;UAC5B,IAAI,CAACR,MAAM,CAACW,IAAI,CAAC,qBAAqB,CAAC;QAC3C;MACJ;MAEAF,OAAO,CAACC,GAAG,CAAC,IAAI,CAACV,MAAM,CAAC;MACxBS,OAAO,CAACC,GAAG,CAAC,KAAK,EAAE,IAAI,CAACb,IAAI,CAACgB,EAAE,CAAC;MAChC,OAAO,IAAI,CAACb,MAAM,CAACO,MAAK,KAAM,CAAC;IAEnC,CAAC;IACD,MAAMO,KAAK,GAAG;MACV,MAAMC,OAAM,GAAI,MAAM,IAAI,CAACb,KAAK,CAACc,KAAK,CAAC;MACvCP,OAAO,CAACC,GAAG,CAACK,OAAO,CAAC;MACpBN,OAAO,CAACC,GAAG,CAAC,IAAI,CAACb,IAAI,CAACgB,EAAE,CAAC;MACzB,IAAIE,OAAO,EAAE;QACT,IAAI,CAACE,OAAO,CAACN,IAAI,CAAE,SAAQ,IAAI,CAACd,IAAI,CAACgB,EAAG,OAAM,CAAC;MACnD;IACJ;EACJ;AACJ,CAAC","names":["UserDataService","name","data","user","email","password","errors","methods","check","e","preventDefault","res","findUserByName","length","alert","console","log","push","i","id","login","isValid","event","$router"],"sourceRoot":"","sources":["F:\\Study\\NKD\\2023FALL\\NP\\Target\\springboot3-postgresql-vue3-crud-main\\vue-3-crud-application\\src\\components\\Login.vue"],"sourcesContent":["<!-- write login page -->\r\n<template>\r\n    <div class=\"container\">\r\n        <div class=\"row\">\r\n            <div class=\"col-md-6\">\r\n                <h3>登录</h3>\r\n                <form @submit=\"check\">\r\n                    <div class=\"form-group\">\r\n                        <label>姓名</label>\r\n                        <input type=\"text\" class=\"form-control\" v-model=\"user.name\">\r\n                    </div>\r\n                    <div class=\"form-group\">\r\n                        <label>邮箱</label>\r\n                        <input type=\"text\" class=\"form-control\" v-model=\"user.email\">\r\n                    </div>\r\n                    <div class=\"form-group\">\r\n                        <label>密码</label>\r\n                        <input type=\"text\" class=\"form-control\" v-model=\"user.password\">\r\n                    </div>\r\n                    <button type=\"submit\" class=\"btn btn-primary\" v-on:click=\"login()\">登录</button>\r\n                    <router-link to=\"/register\" class=\"btn btn-link\">注册</router-link>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport UserDataService from \"@/service/UserDataService\";\r\n\r\nexport default {\r\n    name: \"Login\",\r\n    data() {\r\n        return {\r\n            user: {\r\n                name: \"\",\r\n                email: \"\",\r\n                password: \"\"\r\n            },\r\n            errors: []\r\n        };\r\n    },\r\n    methods: {\r\n        async check(e) {\r\n            e.preventDefault();\r\n            this.errors = [];\r\n\r\n            const res = await UserDataService.findUserByName(this.user.name);\r\n\r\n            if (res.data.length === 0) {\r\n                alert(\"Invalid credentials\");\r\n                console.log(\"Invalid credentials\");\r\n                this.errors.push(\"Invalid credentials\");\r\n            } else {\r\n                let password = \"\";\r\n                for (let i = 0; i < res.data.length; i++) {\r\n                    if (this.user.name === res.data[i].name) {\r\n                        this.user.id = res.data[i].id;\r\n                        password = res.data[i].password;\r\n                        break;\r\n                    }\r\n                }\r\n                if (this.user.password !== password) {\r\n                    alert(\"Invalid credentials\");\r\n                    this.errors.push(\"Invalid credentials\");\r\n                }\r\n            }\r\n\r\n            console.log(this.errors);\r\n            console.log(\"one\", this.user.id);\r\n            return this.errors.length === 0;\r\n\r\n        },\r\n        async login() {\r\n            const isValid = await this.check(event);\r\n            console.log(isValid);\r\n            console.log(this.user.id);\r\n            if (isValid) {\r\n                this.$router.push(`/user/${this.user.id}/data`);\r\n            }\r\n        }\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}